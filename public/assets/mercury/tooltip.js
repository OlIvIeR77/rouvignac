(function(){this.Mercury.tooltip=function(t,i,e){return null==e&&(e={}),Mercury.tooltip.show(t,i,e),Mercury.tooltip},jQuery.extend(Mercury.tooltip,{show:function(t,i,e){return this.forElement=t,this.content=i,this.options=null!=e?e:{},this.document=this.forElement.get(0).ownerDocument,this.initialize(),this.visible?this.update():this.appear()},initialize:function(){return this.initialized?void 0:(this.build(),this.bindEvents(),this.initialized=!0)},build:function(){var t;return this.element=jQuery("<div>",{"class":"mercury-tooltip"}),this.element.appendTo(null!=(t=jQuery(this.options.appendTo).get(0))?t:"body")},bindEvents:function(){var t,i,e,n;for(Mercury.on("resize",function(t){return function(){return t.visible?t.position():void 0}}(this)),this.element.on("mousedown",function(t){return t.preventDefault(),t.stopPropagation()}),n=this.forElement.parentsUntil(jQuery("body",this.document)),i=0,e=n.length;e>i;i++)t=n[i],t.scrollHeight>t.clientHeight&&jQuery(t).on("scroll",function(t){return function(){return t.visible?t.position():void 0}}(this));return jQuery(this.document).on("scroll",function(t){return function(){return t.visible?t.position():void 0}}(this))},appear:function(){return this.update(),this.element.show(),this.element.animate({opacity:1},200,"easeInOutSine",function(t){return function(){return t.visible=!0}}(this))},update:function(){return this.element.html(this.content),this.position()},position:function(){var t,i,e,n;return i=this.forElement.offset(),n=this.element.width(),e=i.top+(Mercury.displayRect.top-jQuery(this.document).scrollTop())+this.forElement.outerHeight(),t=i.left-jQuery(this.document).scrollLeft(),t+n+25>Mercury.displayRect.width&&(t=t-(t+n+25)-Mercury.displayRect.width),t=0>=t?0:t,this.element.css({top:e,left:t})},hide:function(){return this.initialized?(this.element.hide(),this.visible=!1):void 0}})}).call(this);